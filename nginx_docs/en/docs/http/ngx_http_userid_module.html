<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Module ngx_http_userid_module</title><style type="text/css">body { font-family: Georgia, serif; } p { text-align: justify; } table.news p { margin-top: 0; } table.news td { vertical-align: baseline; } table.news .date { text-align: right; padding-right: 0.5em; white-space: nowrap; } table.donors td { vertical-align: baseline; } table.donors li { text-align: left; } div.directive { background: #EEEEEE; padding: 10pt 10pt 10pt 0; } div.directive td { vertical-align: baseline; } div.directive pre { padding: 0; margin: 0; } div.directive p { margin: 5pt 0 0 0; font-size: 80%; } div#banner { background: #EEEEEE; padding: 10pt 10pt 10pt 0; } a.notrans { color: gray; text-decoration:none; } span.initial { font-size: 200%; float: left; padding-right: 10pt;} li { text-align: justify; padding-top: 0.5em; } .compact li { padding-top: 0; } dt { padding-top: 0.5em; } .compact dt { padding-top: 0; } dd { text-align: justify; } td.list { background: #EEEEEE; } blockquote.note { text-align: justify; background: #EEEEEE; border: none; margin: 1em; padding: 0.5em; } blockquote.example { background: transparent; border: none; margin: 1em; padding: 0.5em; } blockquote.example pre { padding: 0; margin: 0; } sup { font-size: 50%; }</style><script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-27974099-2']);
        _gaq.push(['_setDomainName', 'nginx.org']);
        _gaq.push(['_trackPageview']);

        (function() {
           var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
           ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
           var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script></head><body><table width="100%"><tr><td width="70%"><div id="banner"><center><table><tr><td align="center"><a href="http://nginx.com/support.html"><strong>nginx professional services</strong></a></td></tr><tr><td align="center"><i>Prioritize. Save time. Stay focused.</i></td></tr></table></center></div></td><td align="right"><a href="http://nginx.org"><img src="http://nginx.org/nginx.gif" alt="nginx" border="0"></a></td></tr><tr><td width="70%"><center><h3>Module ngx_http_userid_module</h3></center></td><td rowspan="2" align="right" valign="top"><br>english<br><a href="../../../ru/docs/http/ngx_http_userid_module.html">русский</a><br><br><a href="../../../cn/docs/http/ngx_http_userid_module.html">简体中文</a><br><a class="notrans">עברית</a><br><a class="notrans">日本語</a><br><a class="notrans">türkçe</a><br><br><a href="../../../">news</a><br><a href="../../../en/">about</a><br><a href="../../../en/download.html">download</a><br><a href="../../../en/security_advisories.html">security advisories</a><br><a href="../../../en/docs/">documentation</a><br><a href="../../../en/pgp_keys.html">pgp keys</a><br><a href="../../../en/docs/faq.html">faq</a><br><a href="../../../en/links.html">links</a><br><a href="../../../en/books.html">books</a><br><a href="../../../en/support.html">support</a><br><a href="../../../en/donation.html">donation</a><br><br><a href="http://trac.nginx.org/nginx">trac</a><br><a href="http://wiki.nginx.org/">wiki</a><br><a href="http://twitter.com/nginxorg">twitter</a><br><a href="http://www.nginx.com/">nginx.com</a><br></td></tr><tr><td valign="top"><table width="100%"><tr><td align="left"><a href="#example">Example Configuration</a><br><a href="#directives">Directives</a><br>     <a href="#userid">userid</a><br>     <a href="#userid_domain">userid_domain</a><br>     <a href="#userid_expires">userid_expires</a><br>     <a href="#userid_mark">userid_mark</a><br>     <a href="#userid_name">userid_name</a><br>     <a href="#userid_p3p">userid_p3p</a><br>     <a href="#userid_path">userid_path</a><br>     <a href="#userid_service">userid_service</a><br></td></tr></table>

<a name="summary"></a><p>
The <code>ngx_http_userid_module</code> module sets cookies
suitable for client identification.
Received and set cookies can be logged using the embedded variables
<code>$uid_got</code> and <code>$uid_set</code>.
This module is compatible with the
<a href="http://www.lexa.ru/programs/mod-uid-eng.html">mod_uid</a>
module for Apache.
</p>


<a name="example"></a><center><h4>Example Configuration</h4></center><p>
</p> <blockquote class="example"><pre>
userid         on;
userid_name    uid;
userid_domain  example.com;
userid_path    /;
userid_expires 365d;
userid_p3p     'policyref="/w3c/p3p.xml", CP="CUR ADM OUR NOR STA NID"';
</pre></blockquote><p> 
</p>


<a name="directives"></a><center><h4>Directives</h4></center><a name="userid"></a><div class="directive"><table cellspacing="0">
                <tr>
                <td>
            syntax:
                </td>
                <td>
            <code><strong>userid</strong> 
    <code>on</code> |
    <code>v1</code> |
    <code>log</code> |
    <code>off</code>;</code><br>
                </td>
                </tr>
            
                <tr>
                <td>
            default:
                </td>
                <td>
            <pre>userid off;</pre>
                </td>
                </tr>
            
                <tr>
                <td>
            context:
                </td>
                <td>
            <code>http</code>, <code>server</code>, <code>location</code><br>
                </td>
                </tr>
            </table></div><p>
Allows or prohibits to set cookies and log the received cookies:
</p> <dl class="compact">

<dt><code>on</code></dt>
<dd>
allows to set version 2 cookies
and log the received cookies;
</dd>

<dt><code>v1</code></dt>
<dd>
allows to set version 1 cookies
and log the received cookies;
</dd>

<dt><code>log</code></dt>
<dd>
prohibits to set cookies
but allows to log the received cookies;
</dd>

<dt><code>off</code></dt>
<dd>
prohibits to set cookies and log the received cookies.
</dd>

</dl><p> 
</p><a name="userid_domain"></a><div class="directive"><table cellspacing="0">
                <tr>
                <td>
            syntax:
                </td>
                <td>
            <code><strong>userid_domain</strong> <code><i>name</i></code> | <code>none</code>;</code><br>
                </td>
                </tr>
            
                <tr>
                <td>
            default:
                </td>
                <td>
            <pre>userid_domain none;</pre>
                </td>
                </tr>
            
                <tr>
                <td>
            context:
                </td>
                <td>
            <code>http</code>, <code>server</code>, <code>location</code><br>
                </td>
                </tr>
            </table></div><p>
Defines a domain for which the cookie is set.
The parameter <code>none</code> disables setting a domain for a cookie.
</p><a name="userid_expires"></a><div class="directive"><table cellspacing="0">
                <tr>
                <td>
            syntax:
                </td>
                <td>
            <code><strong>userid_expires</strong> <code><i>time</i></code> | <code>max</code>;</code><br>
                </td>
                </tr>
            
                <tr>
                <td>
            default:
                </td>
                <td>
            
            —
                </td>
                </tr>
            
                <tr>
                <td>
            context:
                </td>
                <td>
            <code>http</code>, <code>server</code>, <code>location</code><br>
                </td>
                </tr>
            </table></div><p>
Sets a time during which a browser should keep the cookie.
The parameter <code>max</code> sets the time to
“<code>31 Dec 2037 23:55:55 GMT</code>”.
This is the maximum time understood by old browsers.
</p><a name="userid_mark"></a><div class="directive"><table cellspacing="0">
                <tr>
                <td>
            syntax:
                </td>
                <td>
            <code><strong>userid_mark</strong> <code><i>off | letter | digit | =</i></code>;</code><br>
                </td>
                </tr>
            
                <tr>
                <td>
            default:
                </td>
                <td>
            <pre>userid_mark off;</pre>
                </td>
                </tr>
            
                <tr>
                <td>
            context:
                </td>
                <td>
            <code>http</code>, <code>server</code>, <code>location</code><br>
                </td>
                </tr>
            </table></div><p>
Sets the first symbol of the cookie’s representation base64 tail
(“<code>==</code>” by default) and resets all accepted cookies
with another tail.
It may be useful if it's required to add or change the P3P or the cookie expire
time and leave the internally encoded value unchanged.
</p><a name="userid_name"></a><div class="directive"><table cellspacing="0">
                <tr>
                <td>
            syntax:
                </td>
                <td>
            <code><strong>userid_name</strong> <code><i>name</i></code>;</code><br>
                </td>
                </tr>
            
                <tr>
                <td>
            default:
                </td>
                <td>
            <pre>userid_name uid;</pre>
                </td>
                </tr>
            
                <tr>
                <td>
            context:
                </td>
                <td>
            <code>http</code>, <code>server</code>, <code>location</code><br>
                </td>
                </tr>
            </table></div><p>
Sets a cookie name.
</p><a name="userid_p3p"></a><div class="directive"><table cellspacing="0">
                <tr>
                <td>
            syntax:
                </td>
                <td>
            <code><strong>userid_p3p</strong> <code><i>string</i></code>;</code><br>
                </td>
                </tr>
            
                <tr>
                <td>
            default:
                </td>
                <td>
            
            —
                </td>
                </tr>
            
                <tr>
                <td>
            context:
                </td>
                <td>
            <code>http</code>, <code>server</code>, <code>location</code><br>
                </td>
                </tr>
            </table></div><p>
Sets a value for the “P3P” header field that will be
sent along with a cookie.
</p><a name="userid_path"></a><div class="directive"><table cellspacing="0">
                <tr>
                <td>
            syntax:
                </td>
                <td>
            <code><strong>userid_path</strong> <code><i>path</i></code>;</code><br>
                </td>
                </tr>
            
                <tr>
                <td>
            default:
                </td>
                <td>
            <pre>userid_path /;</pre>
                </td>
                </tr>
            
                <tr>
                <td>
            context:
                </td>
                <td>
            <code>http</code>, <code>server</code>, <code>location</code><br>
                </td>
                </tr>
            </table></div><p>
Defines a path for which the cookie is set.
</p><a name="userid_service"></a><div class="directive"><table cellspacing="0">
                <tr>
                <td>
            syntax:
                </td>
                <td>
            <code><strong>userid_service</strong> <code><i>number</i></code>;</code><br>
                </td>
                </tr>
            
                <tr>
                <td>
            default:
                </td>
                <td>
            <pre>userid_service IP address of the server;</pre>
                </td>
                </tr>
            
                <tr>
                <td>
            context:
                </td>
                <td>
            <code>http</code>, <code>server</code>, <code>location</code><br>
                </td>
                </tr>
            </table></div><p>
Identifies the service that set a cookie.
For version 1 cookies the default value is zero.
For version 2 cookies the default value is an IP address of the server.
</p>

</td></tr></table></body></html>
