<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The Tengine Web Server</title>
  <link rel="stylesheet" type="text/css" href="../style.css">
  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-6614032-4']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

  function correctPNG()
  {
    var arVersion = navigator.appVersion.split("MSIE");
    var version = parseFloat(arVersion[1]);
    if ((version == 5.5 || version == 6) && (document.body.filters))
    {
      for(var j=0; j<document.images.length; j++)
      {
        var img = document.images[j];
        var imgName = img.src.toUpperCase();
        if (imgName.substring(imgName.length-3, imgName.length) == "PNG")
        {
          var imgID = (img.id) ? "id='" + img.id + "' " : "";
          var imgClass = (img.className) ? "class='" + img.className + "' " : "";
          var imgTitle = (img.title) ? "title='" + img.title + "' " : "title='" + img.alt + "' ";
          var imgStyle = "display:inline-block;" + img.style.cssText;
          if (img.align == "left") imgStyle = "float:left;" + imgStyle;
          if (img.align == "right") imgStyle = "float:right;" + imgStyle;
          if (img.parentElement.href) imgStyle = "cursor:hand;" + imgStyle;
          var strNewHTML = "<span " + imgID + imgClass + imgTitle
          + " style=\"" + "width:" + img.width + "px; height:" + img.height + "px;" + imgStyle + ";"
          + "filter:progid:DXImageTransform.Microsoft.AlphaImageLoader"
          + "(src=\'" + img.src + "\', sizingMethod='scale');\"></span>";
          img.outerHTML = strNewHTML;
          j = j - 1;
        }
      }
    }
  }
  window.attachEvent("onload", correctPNG);
  </script>
</head>

<body>
<div id="container">
  <div id="menu">
    <ul>
      <li><a href="../download.html"><img src="../images/icon-down.png"/>Download</a></li>
      <li><a href="../source.html"><img src="../images/icon_code.png"/>Source</a></li>
      <li><a href="../documentation.html"><img src="../images/icon-doc.png"/>Documentation</a></li>
      <li><a href="../faq.html"><img src="../images/icon-faq.png"/>FAQ</a></li>
      <li><a href="../contact.html"><img src="../images/icon-contact.png"/>Contact</a></li>
	    <li id="lang"><a href="../index_cn.html">中文</a> | <a href="../index.html">English</a></li>
    </ul>
  </div>
  <div id="logo"><a href="../index.html"><img src="../images/logo.png" alt="tengine" /></a></div>
  <div class="clear"></div>
  <div class="one_col more_padding font16">
    <div class="module">ngx_http_log_module</div>
    <div class="mod_intro">
<p>Logging via syslog and pipe is supported in tengine. To use it, you should enable the syslog module first:<br/>
./configure --with-syslog<br/>
<p>The syslog module can talk directly to syslogd or syslog-ng.</p>
Log sampling is also possible in tengine to reduce the count of log records.
    </div>
    <div class="dh">Directives</div>
    <div class="directive">
Syntax: <b>access_log</b> log_target [format [ratio=ratio [buffer=size]]] | off<br/>
Default: access_log logs/access.log combined ratio=1<br/>
Context: http, server, location
    </div>
    <div class="introduce">
<p>
Basically, you can use it as same as nginx's 'access_log'. Except for:
<ul>
<li>log_target</li>
It's compatible with the log_file parameter, while three new log media types are supported:
<pre  class="mod_example">
file:/path/to/file
syslog:facility[:loglevel:[target_ip[:target_port] | target_udgram_addr]]
"pipe:/path/to/exec param1 param2"
</pre>
<ul/>
<li>'file'<br/>
Disk file, which is the same as the nginx's.</li>
<li>'syslog'<br/>
Support logging via syslog (UDP).</li>
<pre class="mod_example">
facility := auth | authpriv | cron | daemon | ftp | kern | lpr | mail | mark <br/>    | news | security | syslog | user | uucp | local0 | local1 | local2 <br/>    | local3 | local4 | local5 | local6 | local7<br/>
loglevel := crit | err | error | emerg | panic | alert | warn | warning | <br/>    info | notice | debug
</pre>
The default loglevel is 'info'.
<pre class="mod_example">
target_ip[:target_port]
</pre>
The IP address and port of destination server. The default port is 514. And UDP is the only supported protocol.
<pre class="mod_example">
target_udgram_addr
</pre>
Specify the address of unix_dgram. The default address is "/dev/log". UNIX DGRAM is the only supported protocol.
<p/>
<p/>
Here are a few examples:
<pre class="mod_example">
syslog:user::127.0.0.1
</pre>
Log to 127.0.0.1:514, with facility 'user' and level 'info'.
<pre class="mod_example">
syslog:user:debug
</pre>
Log to local Unix dgram(/dev/log) with facility 'user' and level 'debug'.
<pre class="mod_example">
syslog:cron:debug:10.232.4.28
</pre>
Log to 10.232.4.28:514 with facility 'cron' and level 'debug'.
<pre class="mod_example">
syslog:auth:err:10.232.4.28:10
</pre>
Log to 10.232.4.28:10 with facility 'auth' and level 'err'.<p/>
<li>'pipe'</li>
Since there may be space characters, the pipe name should be wrapped by quotes.<p/>
The privilege of the pipe is the same the worker process (default user and group are 'nobody').   
<p/>
</ul>
<li>ratio</li>
Specify a sampling ratio.<p/>
For example, ratio=0.0001, which means tengine will log only once in every 10000 records.<br/>
This parameter must be explicitly specified, e.g. ratio=1, if you want to use the 'buffer' parameter.<p/><p/>
</p>
    </div>
    <div class="directive">
Syntax: <b>error_log</b> log_target [debug | info | notice | warn | error | crit]<br/>
Default: error_log logs/error.log<br/>
Context: core, http, server, location
    </div>
    <div class="introduce">
	<p>Syslog and pipe are also supported, which is similar to 'access_log'.</p>
	</div>
    <div class="directive">
Syntax: <b>syslog_retry_interval</b> seconds<br/>
Default: syslog_retry_interval 1800<br/>
Context: core
    </div>
    <div class="introduce"><p>The retry interval in case tengine fails to connect to the remote syslog server. </p></div>
  </div>
</div>
<div id="copyright">&copy; 2011-2012 Taobao Inc. All rights reserved.</div>
</body>
</html>
